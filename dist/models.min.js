define("models/customer",["Backbone","utils"],function(a,b){"use strict";return a.Model.extend({idAttribute:"id",urlRoot:"customer/",initialize:function(){this.name=b.getFullName(this.get("first_name"),this.get("last_name"),this.get("middle_name"))}})}),define("models/customers",["Backbone","./customer"],function(a,b){"use strict";return a.Collection.extend({model:b,url:"customer/",parse:function(a){return this.total=a.meta.total,a.data}})}),define("models/interaction",["underscore","Backbone","utils"],function(a,b,c){"use strict";function d(b,c){var d=b.evaluate(c.condition);return b.evaluate(a.isArray(d)||a.isObject(d)?a.isEmpty(d)?c.negative:c.positive:d?c.positive:c.negative)}function e(b,c){var d=b.evaluate(c.condition),e=a.isArray(c.cases)?c.cases:[c.cases],f=a.find(e,function(a){return b.evaluate(a.when)===d});return b.evaluate(a.isUndefined(f)?c.defaultValue:f.value)}function f(c,d){var e,f=c.evaluate(d.where);e=f instanceof b.Collection?f.models:f;var g=d.property,h=c.evaluate(d.value);return a.find(e,function(a){return a instanceof b.Model?a.get(g)==h:a[g]==h})}return b.Model.extend({idAttribute:"id",urlRoot:"interaction/",initialize:function(a,b){b=b||{},this.context=b.context||{},this.context.call&&this.context.call.id&&this.set("call_id",this.context.call.id)},evaluate:function(b){if(a.isNull(b)||a.isUndefined(b)||a.isBoolean(b))return b;if(a.isString(b))return c.interpolateValueString(this,b);if(a.isArray(b))return a.map(b,this.evaluate.bind(this));if(a.isObject(b)&&a.has(b,"operator"))switch(b.operator){case"if":return d(this,b);case"find":return f(this,b);case"eq":return this.evaluate(b.first)==this.evaluate(b.second);case"nq":return this.evaluate(b.first)!=this.evaluate(b.second);case"gt":return this.evaluate(b.first)>this.evaluate(b.second);case"ge":return this.evaluate(b.first)>=this.evaluate(b.second);case"switch":return e(this,b)}return b},nextStep:function(a){this.trigger("before-next-step"),a=this.evaluate(a),this.set("step",a);var b=this.get("steps")||[];b.push(a),this.set("steps",b),this.trigger("next-step")},previousStep:function(){var a=this.get("steps")||[];if(a||a.length>0){var b=a.pop();0===a.length?a.push(b):(this.set("step",a[a.length-1]),this.set("steps",a),this.trigger("previous-step"))}}})}),define("models/script",["underscore","Backbone"],function(a,b){"use strict";return b.Model.extend({url:"script/",getFirstStepName:function(){var b=this.get("firstStep");return b||(b=a.first(this.get("steps")),b&&(b=b.name)),b},getStep:function(b){var c=this.get("steps")||[],d=a.findIndex(c,function(a){return a.name===b});return 0>d?void 0:c[d]}})}),define("models",["models/customer","models/customers","models/interaction","models/script"],function(a,b,c,d){"use strict";return{Customer:a,Customers:b,Interaction:c,Script:d}});